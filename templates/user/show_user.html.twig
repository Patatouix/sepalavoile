{% extends 'carousel.html.twig' %}

{% block content %}

<div class="container mb-5">

    <div class="row align-items-center justify-content-center mb-5">
        <div class="col-12 col-md-4 text-center">
            <img src="https://st4.depositphotos.com/4329009/19956/v/600/depositphotos_199564354-stock-illustration-creative-vector-illustration-default-avatar.jpg" style="height: 250px;" class="rounded-circle" alt="">
        </div>
        <div class="col-12 col-md-4">
            <div class="row text-center">
                <div class="col-12">
                    <h4 class="titresection">{{ user.firstname|upper }} {{ user.name|upper }}</h4>
                </div>
                <div class="col-12 mb-4">
                    <i class="fas fa-award mr-2" style="color: #ff8300"> Adhérent</i>
                    <i class="fas fa-heart" style="color: #ff8300"> Donateur</i>
                </div>
            </div>
        </div>
    </div>

    <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
            <a class="nav-item nav-link active" id="nav-info-tab" data-toggle="tab" href="#nav-info" role="tab" aria-controls="nav-info" aria-selected="true">Infos générales</a>
            <a class="nav-item nav-link" id="nav-achats-tab" data-toggle="tab" href="#nav-achats" role="tab" aria-controls="nav-achats" aria-selected="false">Historique des achats</a>
        </div>
    </nav>

    <div class="tab-content mt-5" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-info" role="tabpanel" aria-labelledby="nav-info-tab">
            <div class="table-responsive">
                <table class="table table-striped table-bordered" style="display: inline-table">
                    <thead>
                        <tr style="background-color: #ff8300;">
                            <th style="color: white" colspan="4">INFOS GENERALES</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Prénom</td>
                            <td>{{ user.firstname|capitalize }}</td>
                            <td>Code postal</td>
                            <td>{{ user.codePostal }}</td>
                        </tr>
                        <tr>
                            <td>Nom</td>
                            <td>{{ user.name|capitalize }}</td>
                            <td>Ville</td>
                            <td>{{ user.ville }}</td>
                        </tr>
                        <tr>
                            <td>Pseudo</td>
                            <td>{{ user.pseudo }}</td>
                            <td>Date d'enregistrement</td>
                            <td>{{ user.createdAt|date('d/m/Y') }}</td>
                        </tr>
                        <tr>
                            <td>Adresse</td>
                            <td>{{ user.adresse }}</td>
                            <td>Vérifié</td>
                            <td>{{ user.isVerified ? 'Oui' : 'Non' }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="tab-pane fade" id="nav-achats" role="tabpanel" aria-labelledby="nav-achats-tab">
            <div class="card-group">
                <div class="table-responsive">
                    <table class="table table-striped mb-5">
                        <thead>
                            <tr style="background-color: #ff8300;"><th style="color: white" colspan="5">ACHATS</th></tr>
                            <tr>
                                <th>Date</th>
                                <th>Type</th>
                                <th>Produit</th>
                                <th>Montant</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for achat in user.achats %}
                                <tr>
                                    <td>{{ achat.createdAt|date('d/m/Y') }}</td>
                                    <td>{{ achat.produit.produitType.nom }}</td>
                                    <td>{{ achat.produit.nom }}</td>
                                    <td>{{ achat.prixPaye }} €</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <table class="table table-striped">
                        <thead>
                            <tr style="background-color: #ff8300;"><th style="color: white" colspan="5">RESERVATIONS</th></tr>
                            <tr>
                                <th>Date</th>
                                <th>Produit</th>
                                <th>Créneau</th>
                                <th>Quantité</th>
                                <th>Prix</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for reservation in user.reservations %}
                                <tr>
                                    <td>{{ reservation.createdAt|date('d/m/Y') }}</td>
                                    <td>{{ reservation.creneau.produit.nom }}</td>
                                    <td>{{ reservation.creneau.debut|date('d/m/Y') }}</td>
                                    <td>{{ reservation.quantitePlaces }}</td>
                                    <td>{{ reservation.prixPaye * reservation.quantitePlaces }} €</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

</div>
{% endblock %}